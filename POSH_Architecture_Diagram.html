<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POSH Safety System ‚Äî Architecture Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        .page {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px;
        }

        /* Cover / Title */
        .cover {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #312e81 100%);
            color: white;
            border-radius: 16px;
            margin-bottom: 40px;
        }

        .cover h1 {
            font-size: 2.8em;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .cover .subtitle {
            font-size: 1.2em;
            font-weight: 300;
            opacity: 0.85;
            margin-bottom: 20px;
        }

        .cover .tech-badges {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .cover .badge {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.25);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }

        /* Section */
        .section {
            margin-bottom: 40px;
            page-break-inside: avoid;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .section-number {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1em;
            flex-shrink: 0;
        }

        .section h2 {
            font-size: 1.5em;
            font-weight: 700;
            color: #0f172a;
        }

        /* Mermaid container */
        .diagram-container {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 30px 20px;
            overflow-x: auto;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        /* Tech Stack Table */
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
            border: 1px solid #e2e8f0;
        }

        th {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: white;
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
        }

        td {
            padding: 12px 18px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.9em;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) td {
            background: #f8fafc;
        }

        td:first-child {
            font-weight: 600;
            color: #3b82f6;
        }

        /* Folder Structure */
        .folder-structure {
            background: #0f172a;
            color: #e2e8f0;
            padding: 28px;
            border-radius: 12px;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 0.82em;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre;
        }

        .folder-structure .folder {
            color: #60a5fa;
        }

        .folder-structure .file {
            color: #94a3b8;
        }

        .folder-structure .comment {
            color: #6b7280;
        }

        .folder-structure .emoji {
            font-family: 'Apple Color Emoji', sans-serif;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .feature-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .feature-card h3 {
            font-size: 1em;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card ul {
            list-style: none;
            padding: 0;
        }

        .feature-card li {
            font-size: 0.85em;
            color: #475569;
            padding: 3px 0;
            padding-left: 16px;
            position: relative;
        }

        .feature-card li::before {
            content: '‚Ä∫';
            position: absolute;
            left: 2px;
            color: #94a3b8;
            font-weight: 700;
        }

        .fc-blue {
            border-top: 3px solid #3b82f6;
        }

        .fc-purple {
            border-top: 3px solid #8b5cf6;
        }

        .fc-green {
            border-top: 3px solid #10b981;
        }

        .fc-orange {
            border-top: 3px solid #f59e0b;
        }

        .fc-red {
            border-top: 3px solid #ef4444;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: #94a3b8;
            font-size: 0.85em;
            border-top: 1px solid #e2e8f0;
            margin-top: 40px;
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }

            .page {
                padding: 20px;
                max-width: 100%;
            }

            .cover {
                padding: 40px 20px;
                margin-bottom: 30px;
            }

            .section {
                page-break-inside: avoid;
                margin-bottom: 30px;
            }

            .diagram-container {
                box-shadow: none;
                border: 1px solid #ddd;
            }

            .no-print {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div class="page">
        <!-- COVER -->
        <div class="cover">
            <h1>üõ°Ô∏è POSH Safety System</h1>
            <div class="subtitle">Prevention of Sexual Harassment ‚Äî Workplace Safety Platform</div>
            <p style="opacity:0.7; font-size:0.9em; margin-bottom:15px;">Architecture & System Design Document</p>
            <div class="tech-badges">
                <span class="badge">Next.js 15</span>
                <span class="badge">React 19</span>
                <span class="badge">Supabase</span>
                <span class="badge">Google Gemini AI</span>
                <span class="badge">Groq LLM</span>
                <span class="badge">TypeScript</span>
            </div>
        </div>

        <!-- 1. HIGH LEVEL ARCHITECTURE -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2>High-Level System Architecture</h2>
            </div>
            <div class="diagram-container">
                <div class="mermaid">
                    graph TB
                    subgraph PL["üñ•Ô∏è Presentation Layer ‚Äî Next.js 15"]
                    LP["üè† Landing Page"]
                    ED["üë§ Employee Dashboard"]
                    HD["üëî HR Admin Dashboard"]
                    ID["‚öñÔ∏è ICC Member Dashboard"]
                    SD["üîí Security Dashboard"]
                    end
                    subgraph AL["‚öôÔ∏è Application Layer ‚Äî API Routes"]
                    AUTH["üîê Auth Module"]
                    CW["üìù Complaint Wizard"]
                    AI["ü§ñ AI Analysis Engine"]
                    CHAT["üí¨ RAG Chatbot"]
                    ALERT["üö® Real-time Alerts"]
                    end
                    subgraph ML["üß† AI / ML Services"]
                    GEMINI["Google Gemini API"]
                    GROQ["Groq LLM API"]
                    end
                    subgraph DL["üíæ Data Layer ‚Äî Supabase"]
                    DB[("PostgreSQL DB")]
                    STORE["üìÅ Evidence Storage"]
                    RLS["üõ°Ô∏è Row-Level Security"]
                    end
                    PL -->|"API Calls"| AL
                    AL -->|"AI Requests"| ML
                    AL -->|"CRUD / Auth"| DL
                    ML -->|"Results"| AL
                    style PL fill:#1e3a5f,stroke:#4a9eff,color:#fff
                    style AL fill:#3b1f6e,stroke:#9b59ff,color:#fff
                    style ML fill:#0d4d3a,stroke:#2ecc71,color:#fff
                    style DL fill:#5a3100,stroke:#f39c12,color:#fff
                </div>
            </div>
        </div>

        <!-- 2. USER ROLES -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2>User Roles & Access Flow</h2>
            </div>
            <div class="diagram-container">
                <div class="mermaid">
                    graph LR
                    USER["üë§ User"] --> LOGIN["üîê Login"]
                    LOGIN --> RB{Role-Based Routing}
                    RB -->|employee| EMP["üë§ Employee"]
                    RB -->|hr_admin| HR["üëî HR Admin"]
                    RB -->|icc_member| ICC["‚öñÔ∏è ICC Member"]
                    RB -->|security| SEC["üîí Security"]
                    EMP --> E1["üìù File Complaint"]
                    EMP --> E2["üìÇ My Cases"]
                    EMP --> E3["üö® Panic Button"]
                    EMP --> E4["üõ°Ô∏è Guardian Mode"]
                    EMP --> E5["üìé Evidence Vault"]
                    HR --> H1["üìä Analytics"]
                    HR --> H2["üìÇ Case Management"]
                    HR --> H3["üë• User Management"]
                    HR --> H4["üìà Pulse Survey"]
                    HR --> H5["üéì Training"]
                    ICC --> I1["üìã Assigned Cases"]
                    ICC --> I2["üîç Investigation"]
                    SEC --> S1["üö® Active Alerts"]
                    SEC --> S2["üìç Live Tracking"]
                    style EMP fill:#2196F3,color:#fff
                    style HR fill:#9C27B0,color:#fff
                    style ICC fill:#FF9800,color:#fff
                    style SEC fill:#F44336,color:#fff
                </div>
            </div>
        </div>

        <!-- 3. AI PIPELINE -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2>AI Pipeline Architecture</h2>
            </div>
            <div class="diagram-container">
                <div class="mermaid">
                    graph TD
                    subgraph INPUT["üì• Input Sources"]
                    COMP["Complaint Text"]
                    EVID["Evidence Files"]
                    QUERY["Chat Query"]
                    end
                    subgraph API["üîå API Routes"]
                    A1["/ai/analyze"]
                    A2["/ai/credibility"]
                    A3["/ai/compare"]
                    A4["/ai/patterns"]
                    A5["/ai/report"]
                    A6["/ai/embed"]
                    A7["/ai/chat"]
                    end
                    subgraph DUAL["üß† Dual AI Strategy"]
                    GEM["Google Gemini ‚Äî Deep Analysis"]
                    GRQ["Groq LLM ‚Äî Fast Responses"]
                    end
                    subgraph RAG["üìö RAG Pipeline"]
                    KB["POSH Act Knowledge Base"]
                    SIM["Similarity Search"]
                    end
                    subgraph OUT["üì§ Outputs"]
                    CS["Credibility Score"]
                    PD["Pattern Detection"]
                    RP["Auto-Generated Report"]
                    CA["Chat Answer"]
                    end
                    COMP --> A1 & A2
                    EVID --> A3 & A6
                    QUERY --> A7
                    A1 & A2 & A3 & A4 & A5 --> GEM
                    A7 --> GRQ
                    A7 --> RAG
                    KB --> SIM --> GRQ
                    GEM --> CS & PD & RP
                    GRQ --> CA
                    style GEM fill:#1a73e8,color:#fff
                    style GRQ fill:#f9ab00,color:#000
                    style RAG fill:#0d652d,color:#fff
                </div>
            </div>
        </div>

        <!-- 4. DATA FLOW -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">4</div>
                <h2>Data Flow Diagram</h2>
            </div>
            <div class="diagram-container">
                <div class="mermaid">
                    graph LR
                    subgraph CLIENT["Client Browser"]
                    UI["React UI"]
                    STATE["Auth Context"]
                    end
                    subgraph NEXT["Next.js Server"]
                    PAGE["Server Components"]
                    ROUTE["API Routes"]
                    MW["Middleware"]
                    end
                    subgraph SUPA["Supabase Cloud"]
                    AUTH_S["Auth Service"]
                    DB_S[("PostgreSQL")]
                    STORE_S["Storage Buckets"]
                    end
                    subgraph EXT["External APIs"]
                    G_API["Gemini API"]
                    GR_API["Groq API"]
                    end
                    UI -->|HTTP| ROUTE
                    UI -->|Hydration| PAGE
                    STATE -->|JWT| MW
                    MW -->|Validate| AUTH_S
                    ROUTE -->|Query| DB_S
                    ROUTE -->|Upload| STORE_S
                    ROUTE -->|AI Request| G_API
                    ROUTE -->|AI Request| GR_API
                    PAGE -->|SSR Data| DB_S
                    style CLIENT fill:#1565C0,color:#fff
                    style NEXT fill:#6A1B9A,color:#fff
                    style SUPA fill:#2E7D32,color:#fff
                    style EXT fill:#E65100,color:#fff
                </div>
            </div>
        </div>

        <!-- 5. TECH STACK -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">5</div>
                <h2>Technology Stack</h2>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Layer</th>
                        <th>Technology</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Frontend</td>
                        <td>Next.js 15, React 19</td>
                        <td>SSR, Routing, UI Rendering</td>
                    </tr>
                    <tr>
                        <td>Styling</td>
                        <td>Tailwind CSS 3.4</td>
                        <td>Responsive Design System</td>
                    </tr>
                    <tr>
                        <td>Animation</td>
                        <td>Framer Motion</td>
                        <td>Micro-interactions & Transitions</td>
                    </tr>
                    <tr>
                        <td>Forms</td>
                        <td>React Hook Form + Zod</td>
                        <td>Validation & Schema Enforcement</td>
                    </tr>
                    <tr>
                        <td>Charts</td>
                        <td>Recharts</td>
                        <td>Analytics Dashboards</td>
                    </tr>
                    <tr>
                        <td>Maps</td>
                        <td>Leaflet.js</td>
                        <td>Live Location Tracking</td>
                    </tr>
                    <tr>
                        <td>Auth</td>
                        <td>Supabase Auth + RLS</td>
                        <td>Authentication & Authorization</td>
                    </tr>
                    <tr>
                        <td>Database</td>
                        <td>Supabase (PostgreSQL)</td>
                        <td>Persistent Data Storage</td>
                    </tr>
                    <tr>
                        <td>AI (Primary)</td>
                        <td>Google Gemini</td>
                        <td>Deep Analysis & Report Generation</td>
                    </tr>
                    <tr>
                        <td>AI (Secondary)</td>
                        <td>Groq LLM</td>
                        <td>Fast Chat & Legal Guidance</td>
                    </tr>
                    <tr>
                        <td>RAG</td>
                        <td>Custom Pipeline</td>
                        <td>POSH Act Knowledge Retrieval</td>
                    </tr>
                    <tr>
                        <td>Language</td>
                        <td>TypeScript 5.7</td>
                        <td>End-to-end Type Safety</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 6. KEY FEATURES -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">6</div>
                <h2>Key Feature Highlights</h2>
            </div>
            <div class="features-grid">
                <div class="feature-card fc-blue">
                    <h3>üîê Authentication & Security</h3>
                    <ul>
                        <li>Supabase Auth with JWT tokens</li>
                        <li>4 distinct user roles</li>
                        <li>Row-Level Security (RLS) policies</li>
                        <li>Role-based dashboard routing</li>
                    </ul>
                </div>
                <div class="feature-card fc-purple">
                    <h3>ü§ñ AI Intelligence</h3>
                    <ul>
                        <li>Credibility scoring for complaints</li>
                        <li>Cross-case pattern detection</li>
                        <li>Evidence comparison analysis</li>
                        <li>Auto-generated investigation reports</li>
                        <li>RAG-powered legal chatbot</li>
                    </ul>
                </div>
                <div class="feature-card fc-red">
                    <h3>üö® Safety Features</h3>
                    <ul>
                        <li>One-tap Panic Button with alerts</li>
                        <li>Guardian Mode periodic check-ins</li>
                        <li>Real-time emergency notifications</li>
                        <li>Live location tracking (Leaflet)</li>
                    </ul>
                </div>
                <div class="feature-card fc-green">
                    <h3>üìä Management & Analytics</h3>
                    <ul>
                        <li>Full complaint lifecycle management</li>
                        <li>Analytics dashboard with charts</li>
                        <li>ICC committee management</li>
                        <li>Training modules & pulse surveys</li>
                    </ul>
                </div>
                <div class="feature-card fc-orange">
                    <h3>üåê Community & Resources</h3>
                    <ul>
                        <li>Discussion forum</li>
                        <li>Gamified leaderboard</li>
                        <li>Ratings & feedback system</li>
                        <li>Resource library & guides</li>
                    </ul>
                </div>
                <div class="feature-card fc-blue">
                    <h3>üìÇ Folder Structure</h3>
                    <ul>
                        <li>src/app/(auth) ‚Äî Login & Register</li>
                        <li>src/app/(dashboard) ‚Äî 4 Role Dashboards</li>
                        <li>src/app/api/ai ‚Äî 7 AI Endpoints</li>
                        <li>src/components ‚Äî Shared UI Library</li>
                        <li>src/lib ‚Äî Core Services & Configs</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 7. COMPLAINT LIFECYCLE -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">7</div>
                <h2>Complaint Lifecycle Flowchart</h2>
            </div>
            <p style="color:#64748b; font-size:0.9em; margin-bottom:16px;">End-to-end flow from complaint filing to case
                resolution, including AI analysis and ICC investigation</p>
            <div class="diagram-container">
                <div class="mermaid">
                    graph TD
                    START(("üôã Employee /<br />Bystander")) -->|"Files Complaint"| WIZARD["üìù 4-Step Complaint
                    Wizard<br />1. Incident Details<br />2. Description + Severity<br />3. Accused + Witnesses<br />4.
                    Evidence Upload"]
                    WIZARD -->|"Submit"| CREATED["‚úÖ Complaint Created<br />Status: PENDING<br />Case ID Generated"]
                    CREATED -->|"Automatic"| AI_SCAN["ü§ñ AI Analysis<br />‚Ä¢ Sentiment Detection<br />‚Ä¢ Severity
                    Scoring<br />‚Ä¢ Category Classification<br />‚Ä¢ Risk Level Assessment"]
                    AI_SCAN -->|"Results Stored"| NOTIFY_HR["üì¢ HR Notified<br />Real-time Alert"]
                    NOTIFY_HR --> HR_REVIEW{"üëî HR Reviews Case"}
                    HR_REVIEW -->|"Assign ICC"| ICC_ASSIGN["‚öñÔ∏è ICC Member Assigned<br />Status: INVESTIGATING"]
                    ICC_ASSIGN --> ACCUSED_NOTIFY["üì© Accused Notified<br />10-Day Response Window"]
                    ACCUSED_NOTIFY --> ACCUSED_RESP{"Accused Response?"}
                    ACCUSED_RESP -->|"Statement Filed"| ICC_INVEST["üîç ICC Investigation<br />‚Ä¢ Evidence Review<br />‚Ä¢
                    Witness Interviews<br />‚Ä¢ AI Pattern Detection<br />‚Ä¢ Cross-case Comparison"]
                    ACCUSED_RESP -->|"No Response"| ICC_INVEST
                    ICC_INVEST --> REPORT["üìÑ AI-Generated Report<br />Investigation Summary"]
                    REPORT --> DECISION{"ICC Decision"}
                    DECISION -->|"Action Taken"| RESOLVED["‚úÖ RESOLVED<br />Action Recorded"]
                    DECISION -->|"Insufficient Evidence"| CLOSED["üìÅ CLOSED<br />Reason Documented"]
                    RESOLVED --> NOTIFY_EMP["üìß Employee Notified<br />Outcome Communicated"]
                    CLOSED --> NOTIFY_EMP
                    NOTIFY_EMP --> AUDIT["üìã Audit Log Entry"]

                    style CREATED fill:#3b82f6,color:#fff
                    style AI_SCAN fill:#8b5cf6,color:#fff
                    style ICC_ASSIGN fill:#f59e0b,color:#000
                    style ICC_INVEST fill:#f97316,color:#fff
                    style RESOLVED fill:#10b981,color:#fff
                    style CLOSED fill:#6b7280,color:#fff
                    style REPORT fill:#ec4899,color:#fff
                </div>
            </div>
        </div>

        <!-- 8. COMPLAINT DATA MODEL -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">8</div>
                <h2>Complaint Tracking ‚Äî Data Model</h2>
            </div>
            <p style="color:#64748b; font-size:0.9em; margin-bottom:16px;">Database schema showing how complaint data,
                evidence, messages, and timeline events are linked</p>
            <div class="diagram-container">
                <div class="mermaid">
                    erDiagram
                    COMPLAINT {
                    string id PK
                    string case_id UK
                    string org_id FK
                    string complainant_id FK
                    boolean is_anonymous
                    enum type "verbal | physical | cyber | quid_pro_quo"
                    string description
                    date date_of_incident
                    time time_of_incident
                    string location
                    enum status "pending | investigating | resolved | closed"
                    int severity "1-10"
                    string assigned_icc_id FK
                    json ai_analysis
                    timestamp created_at
                    timestamp updated_at
                    }

                    COMPLAINT_EVIDENCE {
                    string id PK
                    string complaint_id FK
                    string file_url
                    string file_type
                    string file_name
                    timestamp uploaded_at
                    }

                    COMPLAINT_TIMELINE {
                    string id PK
                    string complaint_id FK
                    string event
                    string details
                    string actor_id FK
                    timestamp occurred_at
                    }

                    COMPLAINT_MESSAGE {
                    string id PK
                    string complaint_id FK
                    enum sender_type "complainant | icc"
                    string sender_id FK
                    string message
                    timestamp sent_at
                    }

                    ACCUSED_RESPONSE {
                    string id PK
                    string complaint_id FK
                    string accused_id FK
                    string statement
                    json counter_evidence
                    string witnesses
                    date deadline
                    timestamp responded_at
                    }

                    EVIDENCE_VAULT {
                    string id PK
                    string user_id FK
                    string file_url
                    string file_type
                    string linked_complaint FK
                    timestamp created_at
                    }

                    USER {
                    string id PK
                    string name
                    string email
                    enum role "employee | hr | icc | security"
                    }

                    COMPLAINT ||--o{ COMPLAINT_EVIDENCE : "has"
                    COMPLAINT ||--o{ COMPLAINT_TIMELINE : "tracks"
                    COMPLAINT ||--o{ COMPLAINT_MESSAGE : "has"
                    COMPLAINT ||--o| ACCUSED_RESPONSE : "receives"
                    COMPLAINT }o--|| USER : "filed by"
                    EVIDENCE_VAULT }o--o| COMPLAINT : "linked to"
                    EVIDENCE_VAULT }o--|| USER : "owned by"
                </div>
            </div>
        </div>

        <!-- 9. COMPLAINT STATUS TRACKING TIMELINE -->
        <div class="section">
            <div class="section-header">
                <div class="section-number">9</div>
                <h2>Complaint Status Tracking ‚Äî Timeline Events</h2>
            </div>
            <p style="color:#64748b; font-size:0.9em; margin-bottom:16px;">Every status change and action is tracked in
                the complaint timeline for full audit trail</p>
            <table>
                <thead>
                    <tr>
                        <th>Event</th>
                        <th>Triggered By</th>
                        <th>Status Change</th>
                        <th>Details Tracked</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>üìù created</td>
                        <td>Employee / Bystander</td>
                        <td>‚Üí pending</td>
                        <td>Complaint text, type, severity, date, location, anonymity flag</td>
                    </tr>
                    <tr>
                        <td>ü§ñ ai_analyzed</td>
                        <td>System (Auto)</td>
                        <td>‚Äî</td>
                        <td>Sentiment, severity score, category, keywords, risk level</td>
                    </tr>
                    <tr>
                        <td>üì¢ hr_notified</td>
                        <td>System (Auto)</td>
                        <td>‚Äî</td>
                        <td>Real-time notification sent to HR dashboard</td>
                    </tr>
                    <tr>
                        <td>‚öñÔ∏è assigned</td>
                        <td>HR Admin</td>
                        <td>‚Üí investigating</td>
                        <td>ICC member name, assignment date</td>
                    </tr>
                    <tr>
                        <td>üì© accused_notified</td>
                        <td>System (Auto)</td>
                        <td>‚Äî</td>
                        <td>10-day response deadline set</td>
                    </tr>
                    <tr>
                        <td>üìé evidence_added</td>
                        <td>Employee</td>
                        <td>‚Äî</td>
                        <td>File type, file name, upload timestamp</td>
                    </tr>
                    <tr>
                        <td>üîç investigating</td>
                        <td>ICC Member</td>
                        <td>‚Äî</td>
                        <td>Investigation notes, witness statements</td>
                    </tr>
                    <tr>
                        <td>üí¨ message_sent</td>
                        <td>Complainant / ICC</td>
                        <td>‚Äî</td>
                        <td>Secure message between parties</td>
                    </tr>
                    <tr>
                        <td>üìÑ report_generated</td>
                        <td>AI System</td>
                        <td>‚Äî</td>
                        <td>Auto-generated investigation report</td>
                    </tr>
                    <tr>
                        <td>‚úÖ resolved</td>
                        <td>ICC / HR</td>
                        <td>‚Üí resolved</td>
                        <td>Action taken, resolution summary</td>
                    </tr>
                    <tr>
                        <td>üìÅ closed</td>
                        <td>ICC / HR</td>
                        <td>‚Üí closed</td>
                        <td>Closure reason, final notes</td>
                    </tr>
                </tbody>
            </table>

            <div style="margin-top:24px;">
                <div class="diagram-container">
                    <div class="mermaid">
                        stateDiagram-v2
                        [*] --> Pending : Complaint Filed
                        Pending --> Pending : AI Analysis Runs
                        Pending --> Investigating : ICC Member Assigned
                        Investigating --> Investigating : Evidence Added
                        Investigating --> Investigating : Messages Exchanged
                        Investigating --> Investigating : Accused Responds
                        Investigating --> Resolved : Action Taken
                        Investigating --> Closed : Insufficient Evidence
                        Resolved --> [*]
                        Closed --> [*]
                    </div>
                </div>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <p><strong>POSH Safety System</strong> ‚Äî Built for compliance with the POSH Act, 2013</p>
            <p>AI-powered investigation ¬∑ Real-time emergency response ¬∑ Comprehensive case management</p>
            <p style="margin-top: 8px; font-size: 0.8em;">9 Sections ¬∑ 4 Role Dashboards ¬∑ 7 AI Endpoints ¬∑ Full
                Complaint Lifecycle Tracking</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#3b82f6',
                primaryTextColor: '#fff',
                primaryBorderColor: '#60a5fa',
                lineColor: '#64748b',
                secondaryColor: '#6366f1',
                tertiaryColor: '#f1f5f9',
                fontSize: '14px'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>

</html>